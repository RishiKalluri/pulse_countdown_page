{"version":3,"sources":["../src/reducer.js"],"names":["ACTIONS","register","id","renderFn","mountPointId","unregister","toggle","show","args","setArgs","hide","hideAll","views","state","payload","displaying","newView","newDisplaying","length","indexOf","index","splice"],"mappings":"8VAAA,oC;;AAEO,IAAMA,4BAAU;AACrBC,YAAU,2BAAa,2BAAb,EAA0C,UAACC,EAAD,EAAKC,QAAL,EAAeC,YAAf,UAAiC,EAAEF,MAAF,EAAMC,kBAAN,EAAgBC,0BAAhB,EAAjC,EAA1C,CADW;AAErBC,cAAY,2BAAa,6BAAb,EAA4C,UAACH,EAAD,UAAS,EAAEA,MAAF,EAAT,EAA5C,CAFS;AAGrBI,UAAQ,2BAAa,yBAAb,CAHa;AAIrBC,QAAM,2BAAa,uBAAb,EAAsC,UAACL,EAAD,qCAAQM,IAAR,mEAAQA,IAAR,qCAAkB,EAAEN,MAAF,EAAMM,MAAMA,IAAZ,EAAlB,EAAtC,CAJe;AAKrBC,WAAS,2BAAa,2BAAb,EAA0C,UAACP,EAAD,sCAAQM,IAAR,yEAAQA,IAAR,uCAAkB,EAAEN,MAAF,EAAMM,MAAMA,IAAZ,EAAlB,EAA1C,CALY;AAMrBE,QAAM,2BAAa,uBAAb,CANe;AAOrBC,WAAS,2BAAa,2BAAb,CAPY,EAAhB,C;;;AAUQ,4BAAc;AAC3B,+BAA6B,gDAAoE,KAAlEC,KAAkE,QAAlEA,KAAkE,KAAxDC,KAAwD,uEAA9CC,OAA8C,KAAnCZ,EAAmC,iBAAnCA,EAAmC,KAA/BC,QAA+B,iBAA/BA,QAA+B,KAArBC,YAAqB,iBAArBA,YAAqB;AAC/F,QAAIQ,MAAMV,EAAN,CAAJ,EAAe;AACb,aAAOU,MAAMV,EAAN,EAAUC,QAAjB,CADa,CACc;AAC5B;AACDS,yBAAYA,KAAZ,sBAAoBV,EAApB,EAAyB,EAAEC,kBAAF,EAAYK,MAAMI,MAAMV,EAAN,IAAYU,MAAMV,EAAN,EAAUM,IAAtB,GAA6B,EAA/C,EAAmDJ,0BAAnD,EAAzB;AACA,wBAAWS,KAAX,IAAkBD,YAAlB;AACD,GAP0B;AAQ3B,iCAA+B,mDAA4C,KAA1CA,KAA0C,SAA1CA,KAA0C,KAAhCC,KAAgC,kDAAXX,EAAW,SAAtBY,OAAsB,CAAXZ,EAAW;AACzE,WAAOU,MAAMV,EAAN,CAAP,CADyE,CACvD;AAClB,wBAAWW,KAAX,IAAkBD,OAAOA,KAAzB;AACD,GAX0B;AAY3B,2BAAyB,6CAA6D,KAA3DG,UAA2D,SAA3DA,UAA2D,KAA/CH,KAA+C,SAA/CA,KAA+C,KAArCC,KAAqC,sFAA3BC,OAA2B,KAAhBZ,EAAgB,iBAAhBA,EAAgB,KAAZM,IAAY,iBAAZA,IAAY;AACpF,QAAMQ,uBAAeJ,MAAMV,EAAN,CAAf,CAAN;AACA,QAAIe,gBAAgBF,UAApB;AACA,QAAI,MAAMP,KAAKU,MAAf,EAAuB;AACrBF,cAAQR,IAAR,GAAeA,IAAf;AACD;AACD,QAAI,CAAC,CAACO,WAAWI,OAAX,CAAmBjB,EAAnB,CAAN,EAA8B;AAC5Be,mDAAoBF,UAApB,IAAgCb,EAAhC;AACD;AACD,wBAAWW,KAAX,IAAkBD,oBAAYA,KAAZ,sBAAyBV,EAAzB,EAA8Bc,OAA9B,EAAlB,EAA8DD,YAAYE,aAA1E;AACD,GAtB0B;AAuB3B,+BAA6B,iDAAiD,KAA/CL,KAA+C,SAA/CA,KAA+C,KAArCC,KAAqC,wEAA3BC,OAA2B,KAAhBZ,EAAgB,iBAAhBA,EAAgB,KAAZM,IAAY,iBAAZA,IAAY;AAC5E,QAAMQ,uBAAeJ,MAAMV,EAAN,CAAf,CAAN;AACA,QAAI,MAAMM,KAAKU,MAAf,EAAuB;AACrBF,cAAQR,IAAR,GAAeA,IAAf;AACD;AACD,wBAAWK,KAAX,IAAkBD,oBAAYA,KAAZ,sBAAyBV,EAAzB,EAA8Bc,OAA9B,EAAlB;AACD,GA7B0B;AA8B3B,2BAAyB,8CAA6C,KAAxCH,KAAwC,2CAAjCE,UAAiC,SAAjCA,UAAiC,KAATb,EAAS,UAAlBY,OAAkB;AACpE,QAAI,OAAOZ,EAAP,KAAc,QAAlB,EAA4B;AAC1B,0BAAWW,KAAX,IAAkBE,YAAY,EAA9B;AACD;AACD,QAAME,6CAAoBF,UAApB,EAAN;AACA,QAAMK,QAAQH,cAAcE,OAAd,CAAsBjB,EAAtB,CAAd;AACA,QAAIkB,UAAU,CAAC,CAAf,EAAkB;AAChBH,oBAAcI,MAAd,CAAqBD,KAArB,EAA4B,CAA5B;AACA,0BAAWP,KAAX,IAAkBE,YAAYE,aAA9B;AACD;AACD,WAAOJ,KAAP;AACD,GAzC0B;AA0C3B,+BAA6B,2CAAgB,KAAXA,KAAW;AAC3C,wBAAWA,KAAX,IAAkBE,YAAY,EAA9B;AACD,GA5C0B,EAAd;AA6CZ;AACCA,cAAY,EADb;AAECH,SAAO,EAFR,EA7CY,C","file":"reducer.js","sourcesContent":["import { createAction, handleActions } from './helpers'\n\nexport const ACTIONS = {\n  register: createAction('LAYER_STACK_VIEW_REGISTER', (id, renderFn, mountPointId) => ({ id, renderFn, mountPointId })),\n  unregister: createAction('LAYER_STACK_VIEW_UNREGISTER', (id) => ({ id })),\n  toggle: createAction('LAYER_STACK_VIEW_TOGGLE'),\n  show: createAction('LAYER_STACK_VIEW_SHOW', (id, ...args) => ({ id, args: args })),\n  setArgs: createAction('LAYER_STACK_VIEW_SET_ARGS', (id, ...args) => ({ id, args: args })),\n  hide: createAction('LAYER_STACK_VIEW_HIDE'),\n  hideAll: createAction('LAYER_STACK_VIEW_HIDE_ALL'),\n};\n\nexport default handleActions({\n  'LAYER_STACK_VIEW_REGISTER': ({views, ...state}, { payload: { id, renderFn, mountPointId } }) => {\n    if (views[id]) {\n      delete views[id].renderFn; // mutable to just help javascript GC\n    }\n    views = {...views, [id]: { renderFn, args: views[id] ? views[id].args : [], mountPointId } };\n    return {...state, views};\n  },\n  'LAYER_STACK_VIEW_UNREGISTER': ({views, ...state}, { payload: { id } }) => {\n    delete views[id]; // mutable to just help javascript GC\n    return {...state, views: views};\n  },\n  'LAYER_STACK_VIEW_SHOW': ({displaying, views, ...state}, { payload: { id, args }}) => {\n    const newView = { ...views[id] };\n    let newDisplaying = displaying;\n    if (0 !== args.length) {\n      newView.args = args;\n    }\n    if (!~displaying.indexOf(id)) {\n      newDisplaying = [...displaying, id]\n    }\n    return {...state, views: { ...views, ...{ [id]: newView } } , displaying: newDisplaying };\n  },\n  'LAYER_STACK_VIEW_SET_ARGS': ({views, ...state}, { payload: { id, args }}) => {\n    const newView = { ...views[id] };\n    if (0 !== args.length) {\n      newView.args = args;\n    }\n    return {...state, views: { ...views, ...{ [id]: newView } } };\n  },\n  'LAYER_STACK_VIEW_HIDE': ({...state, displaying}, { payload: id }) => {\n    if (typeof id !== 'string') {\n      return {...state, displaying: [] };\n    }\n    const newDisplaying = [...displaying];\n    const index = newDisplaying.indexOf(id);\n    if (index !== -1) {\n      newDisplaying.splice(index, 1);\n      return {...state, displaying: newDisplaying };\n    }\n    return state;\n  },\n  'LAYER_STACK_VIEW_HIDE_ALL': ({...state}) => {\n    return {...state, displaying: [] };\n  },\n}, {\n    displaying: [],\n    views: {},\n});"]}